---
- hosts: all
  remote_user: root
  #remote_user: root
  #become: yes
  #become_method: sudo

  tasks:
  - name: upgrade all packages
    apt:
      name: '*'
      state: latest

  - name: Download ssh_config from git repo
    get_url:
      url: https://raw.githubusercontent.com/habbis/sudoers_centos/master/sudoers
      dest: /etc/
      mode: '0440'

  - name: Create group for docker
    group:
      name: docker
      state: absent

  - name: add user called user with sudo right
    user:
      name: user
      shell: /bin/bash
      groups: sudo
      append: yes

  - name: set authorized keys from github to user
    authorized_key:
      user: user
      state: present
      key: https://github.com/habbis.keys

   #- name: set authorized keys from github to virt
     #authorized_key:
       #user: virt
       #state: present
       #keys: https://github.com/habbis.keys

  - name: Install packages ubuntu
    apt:
      name:
        - cockpit
        - curl
        - wget
        - python2
        - python3
        - python3-pip
        - git
        - vim
        - apt-utils
        - device-mapper-persistent-data
        - lvm2
      state: present

  - name: enable cockpit systemd service
    firewalld:
      service: cockpit
      permanent: yes
      state: enabled
